version: "3.9"
services:
  spacemacs-gui:
    platform: linux/x86_64
    build:
      context: .
      dockerfile: Dockerfile
    image: spacemacs:latest
    container_name: spacemacs-gui
    environment:
      # Let containers talk to the Windows host X server
      - DISPLAY=host.docker.internal:0.0
      # Optional: fix theme/menus rendering
      - GDK_SCALE=1
      - GDK_DPI_SCALE=1
      - SHELL=/bin/bash
    working_dir: /root/workspace
    volumes:
      - ../orgme:/root/workspace
      - ./.spacemacs:/root/.spacemacs
      - ${USERPROFILE}/.gitconfig:/root/.gitconfig:ro
      - ${USERPROFILE}/.ssh:/root/.ssh-volume:ro
    command: emacs
